# Changelog

# 3.2.0

- vivliostyle/cliの組み込み
    Vivliostyleを別途インストールする必要がなくなりました

# 3.1.1

- ダイアログの間違いを修正（少数→小数）

# 3.1.0

- 文字数カウントの改善
    - 原稿用紙カウントの表示・非表示機能追加
    - 文字数カウントの表示・非表示機能追加
    - 進捗の表示・非表示機能追加
    - 編集距離の表示・非表示機能追加

# 3.0.7

- 原稿のファイルだけNovel形式として扱うように修正[issue76対応](https://github.com/ttrace/vscode-language-japanese-novel/issues/76)

# 3.0.6

- 横組の圏点位置を修正

# 3.0.5

- 並べ替えを有効にしているときに新規ファイルを作成すると拡張子が付与されないバグを修正
- ファイルを挿入するときにプロジェクトで指定した拡張子を付与するように修正

# 3.0.4

- 並べ替えが有効なときに何も編集しないでEnterを押すと、連番と拡張子が二重になってしまうバグを修正しました

# 3.0.3

- プロジェクトのあるフォルダーのパスに空白文字が含まれているときに、PDFプレビューが動作しないバグを修正しました

# 3.0.2

- 原稿（あるいはDraft）フォルダーの中にないテキストファイルで編集距離を取得しないようにしました
    - ソフトウェア開発に用いる長大なテキストファイルを開いたときに、編集距離を取得する関数が大きな処理能力を消費してしまうことがあったためです

# 3.0.1

- 原稿ツリーで選択したファイルの名前を変更できないバグを修正
- カラーテーマがライトの時に閉じたフォルダーが見えなく（dark用に）なっていたバグを修正

# 3.0.0

- 原稿ツリーに以下の機能を搭載しました
    - ドラッグ&ドロップでファイル・フォルダーの順番と階層の変更
        - 自動連番機能
    - ファイル・フォルダーの追加

# 2.2.1

- H1-H6の原稿用紙プレビュー、横書きでのレイアウトを見直しました

# 2.2.0

- Markdownの#見出しをH1-H6までに変換します
- 青空文庫注記法の通常見出し（○○［＃「○○」は中見出し］の形式）をH1-H3に変換します
- 圏点の挿入機能を追加しました
    - 文字を選択して「圏点の挿入」を行う圏点の注記を挿入します
- 圏点の塗りを、テーマカラーに合わせて完全な黒・白で描くように変更しました

# 2.1.1

- Mac OSの環境でPDFプレビューの更新ができなかったバグを修正しました。

# 2.1.0

- カスタムCSS対応
    - プロジェクトフォルダーにcssというフォルダーがあり、その中にprint.cssがある場合、PDF生成はそちらを優先するようになりました。
    - レイアウトを固定して、異なる版面や上下・ノド・小口の空き、新たなスタイルシートを導入いただけます。印刷物を作成する場合にご利用ください
    - いくつかの変数を利用できます
        - ${writingDirection}: 縦書き、横書きの組み方向をnovel-writerの設定で指定できます
        - ${fontSizeWithUnit}: 文字サイズをnovel-writerの設定で指定できます
        - ${originPageNumber}: ノンブルの開始ページをnovel-writerの設定で指定できます
        - ${pageNumberFormatR}: ページの柱をnovel-writerの設定で指定できます
        - ${pageStartingCss}: PDFが右ページ開始か、左ページ開始かをnovel-writerの設定で指定できます
        - ${columnCSS}: 段数をnovel-writerの自動計算で指定できます
        - ${columnHeitghtRate}: 一段の高さをnovel-writerの自動計算で指定できます
    - novel-writerの標準的なprintCssは、以下で閲覧できます
        - [GitHub repository](https://github.com/ttrace/vscode-language-japanese-novel/blob/main/htdocs/css/print.css)
- デフォルトの組版を、行42文字、ページあたり18行に変更しました

# 2.0.2

- 進捗リセットを行うと日跨ぎ処理ができなくなっていたバグを修正しました

# 2.0.0

- 拡張子が.mdのファイルでもnovel-writerの多くの機能を使用できるようになりました
    - 設定のNovel->General->FileTypeで、.txtと.mdのどちらかを選択できます
    - Markdownの # Hedingでテキストを折りたためるようになりました
-  合計の文字数が現在開いているファイルの文字数で変わる文字数カウントのバグを修正しました。

# 1.9.19

- PDFを作成する際に、自動縦中横が複数あるとカーソルの除去に失敗することがあるバグを修正しました
    - はおこっこ @haoblackj@x.com さん、ありがとうございます

# 1.9.18

- 前のシーン、次のシーンの表示に失敗するバグを修正しました

# 1.9.16

- 進捗をリセットを追加
    - 当日の進捗を0にできるようになりました
- MacでNFC, NFDに起因する文字数のカウントに失敗していたバグの修正

# 1.9.15

- 読点の後の《を会話扱いに変更。

# 1.9.14

- ルビではない《》を会話扱いに変更
- サ変動詞を動詞としてハイライト

# 1.9.13

- 青空文庫注記［＃地付き］に対応しました
- 青空文庫注記［＃地からn文字上げ］に、3文字まで対応しました

# 1.9.12

- プレビューの字数・行数の初期設定が動作していなかったのを修正

# 1.9.11

- Issue 72[WIndowで字下げが動作しない](https://github.com/ttrace/vscode-language-japanese-novel/issues/72)の原因の一つに対処

# 1.9.10

- 会話の品詞ハイライトが青空文庫の注記でキャンセルされてしまうバグの修正
– 出力するPDFやプロジェクトのファイルパスに空白文字が含まれている場合にPDFが作成されなかったバグの修正

# 1.9.9

- MacOSでテキストの総数が正しく計算できない場合がある問題に対処しました
    濁点や半濁点を含むテキストをエディターで選択しているときに、文字数が増えてしまうバグがありました

# 1.9.7

- テキストの増加数が正しく動作しないバグを修正

# 1.9.6

- PDF出力、PDFプレビューで縦中横が動作しないバグを修正しました

# 1.9.5

- 文字数を保存できなかったバグを修正しました（テストのままビルドしてしまいました）

# 1.9.4

- 文字数の増分をテスト的に実装しました
    - ワークスペース全体の文字数増減は前日以前からの差分を表示します  
        起動中に日付が変わった時は、増減はゼロになります。
    - 個別ファイルの文字数はGitの前日以前の過去コミットからの増減を表示します  
        Gitを用いていない時は表示されません
    - 2.0.0で文字数の表示非表示ができるように対応します

# 1.9.3

- Gitのレポジトリ判定を行い、編集距離の取得失敗を防ぐようにコードを修正しました

# 1.9.2

- 複数のプロジェクトを開いている時に、原稿用紙プレビューが最初に起動したドキュメントを参照してしまうバグを修正しました

# 1.9.1

- フォルダー名や上位パスに空白などを含む作業環境でPDFが出力できないバグに対応しました

# 1.9.0

- 縦書きプレビュー機能を横書きにも対応しました

# 1.8.2

- 文章の末尾がサ変動詞の時に品詞ハイライトが停止するバグに対処しました

# 1.8.0/1.8.1

- PDFのページナンバーフォーマットを変更する機能を追加しました

# 1.7.8

- 「品詞ハイライトの停止」コマンドを削除
- 原稿フォルダー外のテキストファイルを選択しているときに、文字数カウントの総計が選択テキストを含む結果になっていたバグを修正

# 1.7.7

- [Fix relative path separator, and add a type suggestion.](https://github.com/ttrace/vscode-language-japanese-novel/pull/67)の適用  
    Windows環境でのキャラクターカウントが動作するようになります。[kaito-yoshitate](https://github.com/kaito-yoshitate)さん、ありがとうございます。
- Macで濁点、半濁点を含むファイルパスの文字数カウントが正常に動作していなかった問題を修正しています

# 1.7.6

- 新しいデフォルトカラーテーマに対応
-   @types/glob                         ^8.0.1  →    ^8.1.0
    @types/node                       ^18.13.0  →   ^20.1.1
    @types/sinon                      ^10.0.13  →  ^10.0.14
    @types/vscode                      ^1.75.0  →   ^1.78.0
    @typescript-eslint/eslint-plugin   ^5.51.0  →   ^5.59.5
    @typescript-eslint/parser          ^5.51.0  →   ^5.59.5
    @vscode/test-web                   ^0.0.34  →   ^0.0.43
    eslint                             ^8.34.0  →   ^8.40.0
    glob                                ^8.1.0  →   ^10.2.2
    simple-git                         ^3.16.0  →   ^3.18.0
    sinon                              ^15.0.1  →   ^15.0.4
    typescript                          ^4.9.5  →    ^5.0.4
    utf-8-validate                      ^6.0.2  →    ^6.0.3
    webpack                            ^5.75.0  →   ^5.82.0
    webpack-cli                         ^5.0.1  →    ^5.1.1
    ws                                 ^8.12.0  →   ^8.13.0

# 1.7.5

- PDF出力でカーソルのある場所から文字が消えるバグを修正

# 1.7.4

- 縦書きプレビューをクリックしたときのコードを整理しました。挙動が安定していると思います。

# 1.7.3

- 縦書きプレビューをクリックしてエディターのカーソルを移動させた時、テキストエディターがアクティブになるように変更しました

# 1.7.2

- kuromoji.jsの解析機をキャッシュして、形態素解析の高速化を行いました  
    品詞ハイライト、ルビの追加、たる変換が高速化していると思います

# 1.7.1

- 引用のイタリック表示をやめました
- ルビの追加と「た・る」変換の関数のリファクタリングを行いました
- 縦書きプレビューをクリックしたとき、行ではなく文字にカーソルを移動するようになりました

# 1.7.0

- ルビの追加に対応しました。

# 1.6.9

- PDF出力機能をPDFのプレビューとPDFの保存に分け、保存時にファイル名を指定できるようにしました

# 1.6.8

- 作成するPDFの開始ページを右に設定できるようになりました

# 1.6.7

- Windowsの標準環境（非WSL）で、Vivliostyleを用いるPDF出力が動作していなかったバグを修正

# 1.6.6

- Windowsで原稿ツリーのコマンドが動作していなかったバグの修正

# 1.6.5

- vivliostyle の実行オプションに --no-sandbox を追加

# 1.6.4

- 空行にカーソルがあるときに、縦書きプレビューのカーソルが誤動作するバグの修正

# 1.6.3

- 原稿ツリーに締め切りフォルダーのコンテクストメニューを追加
- 原稿ツリーでファイルの更新状況を確認できるように修正

# 1.6.2

- 縦書きプレビューの1行目が隠れてしまうバグに対処
- PDFの段組を均等割付けから先頭割り付けに修正
- PDFの柱に字数行数を記載
- コメントのレイアウトを調整
- 縦書きプレビュー時のカーソル位置が行末にある時に空の行が挿入されるバグを修正
- npm modulesのアップデート
    @types/node                       ^18.11.19  →  ^18.13.0
    @typescript-eslint/eslint-plugin    ^5.50.0  →   ^5.51.0
    @typescript-eslint/parser           ^5.50.0  →   ^5.51.0
    eslint                              ^8.33.0  →   ^8.34.0

# 1.6.1

- 品詞ハイライトをメニューから設定に移動しました
    デフォルトでオフ、に設定することが可能です
    ワークスペースごとの設定も可能です
- 原稿ツリーのバグ修正
    40m、のように、並び順とは関係ない数字がファイル名につけられている状態に対処

# 1.6.0

- ノベルライターサイドパネル追加
- ライブラリのアップデート
    ws                                  ^8.11.0  →    ^8.12.0
    @types/glob                          ^8.0.0  →     ^8.0.1
    @types/node                       ^18.11.18  →  ^18.11.19
    @types/vscode                       ^1.74.0  →    ^1.75.0
    @types/ws                            ^8.5.3  →     ^8.5.4
    @typescript-eslint/eslint-plugin    ^5.47.1  →    ^5.50.0
    @typescript-eslint/parser           ^5.47.1  →    ^5.50.0
    @vscode/test-web                    ^0.0.33  →    ^0.0.34
    eslint                              ^8.30.0  →    ^8.33.0
    glob                                 ^8.0.3  →     ^8.1.0
    typescript                           ^4.9.4  →     ^4.9.5
    utf-8-validate                      ^5.0.10  →     ^6.0.2

# 1.5.4

- PDF書き出しの判型をA5に変更

# 1.5.3

- 初期設定でPDF出力が崩れるのを暫定的に修正
- ライブラリのアップデート
    simple-git                        ^3.14.1  →    ^3.15.1
    ws                                 ^8.9.0  →    ^8.11.0
    @types/mocha                      ^10.0.0  →    ^10.0.1
    @types/node                       ^18.8.0  →  ^18.11.10
    @types/vscode                     ^1.71.0  →    ^1.73.1
    @typescript-eslint/eslint-plugin  ^5.38.1  →    ^5.45.0
    @typescript-eslint/parser         ^5.38.1  →    ^5.45.0
    @vscode/test-web                  ^0.0.30  →    ^0.0.33
    bufferutil                         ^4.0.6  →     ^4.0.7
    eslint                            ^8.24.0  →    ^8.29.0
    mocha                             ^10.0.0  →    ^10.1.0
    sinon                             ^14.0.0  →    ^15.0.0
    ts-loader                          ^9.4.1  →     ^9.4.2
    typescript                         ^4.8.4  →     ^4.9.3
    utf-8-validate                     ^5.0.9  →    ^5.0.10
    util                              ^0.12.4  →    ^0.12.5
    webpack                           ^5.74.0  →    ^5.75.0
    webpack-cli                       ^4.10.0  →     ^5.0.0

# 1.5.2

-  PDF出力時に字下げのレイアウトが崩れていたのを修正

# 1.5.1

- 縦書きプレビューのアニメーションスクロールを切る設定を追加
- Windows環境で、縦書きプレビューの更新がタイピングの途中で止まっていた問題の修正
- 1.3以降、プレビューサーバーを単独で起動できなかった問題を修正

# 1.5

- PDF出力機能の変更
- 前のシーン、次のシーンを表示

# 1.4.4

- 品詞ハイライトのオンオフをワークスペースごとに記憶できるようになりました
- 単一コラムの時のPDF出力で文字が溢れるケースを修正しました

# 1.4.3

- PDFのタイトルに作品名を反映するようになりました

# 1.4.2

- 縦書きプレビューのサーバー使用ポートの検出に関する問題を修正。#55をマージ。

# 1.4.1

- VS Codeで複数のドキュメントを起動しているときに縦書きプレビューが動作していない問題の修正

# 1.4

- 縦書きプレビューの変更
    - フォントサイズの撤廃
    　　文字のサイズは、1行あたりの文字数で自動的に計算されます
    - 文字サイズの自動調整
        プレビューを表示するウインドウのサイズに合わせて文字の大きさが自動的に変わります
- PDF出力の機能追加
    - ページあたりの行数に対応
        縦書きプレビュー設定のページあたり行数に対応しました
    - 自動段組設定
        行が短い場合、またはページあたり行数が多い場合には段組出力します
    - 保存が終わったことを通知するようになりました
- 締め切りフォルダーの設定保存
    - 締め切りフォルダーと文字数を、次回起動時にも利用できるようになりました  
        文字数を入力しなければ設定は解除されます
- 原稿のコンパイル機能を締め切りフォルダー対応  
    原稿をコンパイルする際、締め切りフォルダー内のテキストファイルを結合するようになりました
- プラグインパッケージの変更  
        Webpackの設定を見直し、プラグインのサイズを削減しました
- npmモジュールの更新
    @types/node                       ^18.8.0  →  ^18.8.4
    @types/vscode                     ^1.71.0  →  ^1.72.0
    @typescript-eslint/eslint-plugin  ^5.38.1  →  ^5.40.0
    @typescript-eslint/parser         ^5.38.1  →  ^5.40.0
    @vscode/test-web                  ^0.0.30  →  ^0.0.31
    eslint                            ^8.24.0  →  ^8.25.0
    sinon                             ^14.0.0  →  ^14.0.1

# 1.3.15

- 縦書きプレビューの更新をコールバックモデルに変更  
    タイピングなど、小さな変更を連続して行うときのレスポンス向上を狙っています
- 縦書きプレビューのページ描画を復活  
    1.3で行番号をつけた時になくなっていた縦書きプレビューのページ区切り表示を復活させました
- npm モジュールの更新
    simple-git                         ^3.14.0  →  ^3.14.1
    ws                                  ^8.8.1  →   ^8.9.0
    @types/mocha                        ^9.1.1  →  ^10.0.0
    @types/node                       ^18.7.15  →  ^18.8.0
    @typescript-eslint/eslint-plugin   ^5.36.2  →  ^5.38.1
    @typescript-eslint/parser          ^5.36.2  →  ^5.38.1
    eslint                             ^8.23.0  →  ^8.24.0
    ts-loader                           ^9.3.1  →   ^9.4.1
    typescript                          ^4.8.2  →   ^4.8.4

# 1.3.14

- 青空文庫の注記法を品詞モディファイアで捕捉できるようになりました

# 1.3.13

- 青空文庫注記法の文字下げが動作していなかった問題に対処
- 大きなディスプレイを使っているときに行番号の枠が消えてしまう問題に対処
- npmモジュールの更新
    fastest-levenshtein               ^1.0.14  →   ^1.0.16
    simple-git                        ^3.10.0  →   ^3.14.0
    @types/glob                        ^7.2.0  →    ^8.0.0
    @types/node                       ^18.0.6  →  ^18.7.15
    @types/vscode                     ^1.69.0  →   ^1.71.0
    @types/webpack-env                ^1.17.0  →   ^1.18.0
    @typescript-eslint/eslint-plugin  ^5.30.7  →   ^5.36.2
    @typescript-eslint/parser         ^5.30.7  →   ^5.36.2
    @vscode/test-web                  ^0.0.27  →   ^0.0.30
    eslint                            ^8.20.0  →   ^8.23.0
    typescript                         ^4.7.4  →    ^4.8.2
    webpack                           ^5.73.0  →   ^5.74.0

# 1.3.12

- カーソルの視認性を向上
- npmモジュールの更新
  - fastest-levenshtein               ^1.0.14  →   ^1.0.16
  - simple-git                        ^3.10.0  →   ^3.13.0
  - @types/node                       ^18.0.6  →  ^18.7.13
  - @types/vscode                     ^1.69.0  →   ^1.70.0
  - @types/webpack-env                ^1.17.0  →   ^1.18.0
  - @typescript-eslint/eslint-plugin  ^5.30.7  →   ^5.35.1
  - @typescript-eslint/parser         ^5.30.7  →   ^5.35.1
  - @vscode/test-web                  ^0.0.27  →   ^0.0.29
  - eslint                            ^8.20.0  →   ^8.22.0
  - typescript                         ^4.7.4  →    ^4.8.2
  - webpack                           ^5.73.0  →   ^5.74.0

# 1.3.11

- アニメーションスクロールの抑制  
アニメーションスクロールの呼び出しが蓄積しないように修正しました。

# 1.3.10

- アニメーションスクロールの抑制  
カーソルが2行よりも小さくしか動かないときに、スクロールアニメーションを行わないように修正しました。

# 1.3.9

- 編集距離を表示する際に出していたgit関係のアラートを抑止しました
- npmのモジュールを更新しています
  - fastest-levenshtein                ^1.0.12  →   ^1.0.14     
  - simple-git                          ^3.7.1  →   ^3.10.0     
  - ws                                  ^8.8.0  →    ^8.8.1     
  - @types/node                       ^17.0.41  →   ^18.0.6     
  - @types/sinon                      ^10.0.11  →  ^10.0.13     
  - @types/vscode                      ^1.68.0  →   ^1.69.0     
  - @typescript-eslint/eslint-plugin   ^5.27.1  →   ^5.30.7     
  - @typescript-eslint/parser          ^5.27.1  →   ^5.30.7     
  - @vscode/test-web                   ^0.0.24  →   ^0.0.27     
  - eslint                             ^8.17.0  →   ^8.20.0     
  - ts-loader                           ^9.3.0  →    ^9.3.1     
  - typescript                          ^4.7.3  →    ^4.7.4     
  - webpack-cli                         ^4.9.2  →   ^4.10.0  

# 1.3.8

- 縦書きプレビューの左右スクロールをアニメーションするように変更しました

# 1.3.7

- コメントアウトのトークンモディファイア"comment"を作成しました。
- 閉じる方の鉤括弧が他の括弧と重なっている時に、品詞ハイライトの会話が閉じなくなっている問題を修正しました。

# 1.3.6

- コメントアウトの吹き出しがずれていたのを修正しました。

# 1.3.5

- 日本語小説の文末辞「た」「る」を切り替えるコマンド「Novel:文末辞入れ替え」を実装しました。  
コマンドを実行すると、カーソルを挿入した文の文末辞を、終止形（笑う、言う、払う、見ているなど）から連体形（笑った、言った、払った、見ていたなど）に変換します。

# 1.3.4

- プレビューサーバーのURLをhostnameに変更

## 1.3.3

- 品詞ハイライトの開始・停止を実装  
品詞ハイライトをコマンドでオンオフできるようになりました

## 1.3.2

- カラーリングのデフォルトスタイルから「太字」を削除

## 1.3.1

- 青空文庫注記法の縦中横をサポート  
縦書きプレビューで、tcy［＃「tcy」は縦中横］と注記した縦中横を描くようになります

## 1.3

- 縦書きプレビューに行番号を表示  
この変更に伴い、1.2までで実装していたページ区切りの目安にしていたグラデーションを止めました。ページ区切りは別の方法で復活させます。
- プレビューサーバーのURL表示  
Visual Studio Codeの縦書きプレビューインデックスに、サーバーのアドレスとポート番号を表示するように変更しました。

## 1.2

- kuromoji.jsを用いた形態素解析を導入。品詞ハイライトを実現しました。
- 縦書きプレビューでタップした行をエディターで表示できるようになりました。
- 縦書きプレビューのポート番号を、VS Codeのプレビューに表示します。


## 1.0.9

- 縦書きプレビューを複数のワークスペースで同時に実行できるようになりました。
    - 縦書きプレビューを実行したワークスペースは、8080から偶数番号ずつ増えるポート番号で縦書きサーバーを起動します。  
    外部のWebブラウザーや、モバイル端末から縦書きを表示するときは、8080、8082、8084と増えていく番号のいずれかを指定してください。


## 1.0.8

- 縦書きプレビューする言語を novel, plaintext, markdown の三種類に限定しました。

## 1.0.7

- [Issue ユーザー定義検索置換後に2桁の数字が含まれていると意図しない置換が発生する \#30](https://github.com/ttrace/vscode-language-japanese-novel/issues/30) by [nakaba-yono](https://github.com/nakaba-yono)に対処しました。

## 1.0.6

- アイコンをつけました。

## 1.0.5

- novel、markdown、plaintext以外の書類やウインドウを開いているときに文字数カウントを表示しないように修正しました。

## 1.0.4 debug release

- パッケージングのミスを修正しました。

## 1.0.3

- 1.0.0でマージした[Masayoshi Takahashi](https://github.com/takahashim)さんのPRを再度マージして、[Use fastest-levenshtein instead of (a copy of) levenshtein-edit-distance \#26](https://github.com/ttrace/vscode-language-japanese-novel/pull/26)をマージして、編集距離を用いるnpmモジュールを、[fastest-levenshtein](https://github.com/ka-weihe/fastest-levenshtein)に変更しました。
- 縦書きプレビューに自動縦中横機能をつけました。二桁の半角数字を縦中横でプレビューします。


## 1.0.2

- [Takahashi Masayoshi](https://github.com/takahashim)さんのPR、[Unify all settings of this extension with NovelSettings](https://github.com/ttrace/vscode-language-japanese-novel/pull/27)をマージしました
- 1.0.1 で書いた編集距離に関するワーニングを整理しました。

## 1.0.1

昨日以前のコミットがないときに編集距離が機能しない問題を解消しました。  
v1.0.1以降は、前日までのコミットが見つからない場合（作業当日の）最も古いコミットからの編集距離を表示します。

ステータスバーのアイコンを変更しました。

ファイルを開いたときに編集距離が更新されないバグを修正しました。

## 1.0.0

[Masayoshi Takahashi](https://github.com/takahashim)さんのPR、[Use fastest-levenshtein instead of (a copy of) levenshtein-edit-distance \#26](https://github.com/ttrace/vscode-language-japanese-novel/pull/26)をマージして、編集距離を用いるnpmモジュールを、[fastest-levenshtein](https://github.com/ka-weihe/fastest-levenshtein)に変更しました。

## 0.9.9

編集距離を算出する基準ファイルの更新日を、24時間前から、当日の0時に変更しました。
## 0.9.8

デバッグリリースです。  
catch-then構文を入れ変えました。大きなファイルを開いている時にレスポンスが悪くなっていた症状が軽減されます。


## 0.9.7

文字数表示欄に、前日からの編集距離を表示を搭載しました。  
前日の状態はGitのコミットを参照しているので、Gitで履歴管理されていないファイルの編集距離は表示できません。またファイル名をGit mvを用いずに変更した場合にも、編集距離の表示はできません。

編集距離には、最大0.5秒の遅延評価を行います。

編集距離は、MITライセンスで公開してくださっている[Titus Wormer](https://wooorm.com)さんの[levenshtein-edit-distance](https://www.npmjs.com/package/levenshtein-edit-distance)のソースコードを用いています。  
本来ならEMSモジュールをインポートして利用すべきところですが、Visual Studio Codeのエクステンションに組み込で利用する際の規則を私が理解していないため、ソースを直接埋め込んで利用させていただいています。

## 0.9.5

文字数のカウントに失敗するケースに対処しました。  
根本的な対策ではないので、近いうちに再実装しなおします。

## 0.9.3

全ドキュメントと締め切りフォルダーの文字数が、リアルタイム表示できるようになりました。  
標準ではないキーバインドを使っている場合には数字が反映されない場合があります。

## 0.9.2

Windowsでサーバーが404になるバグに対処しました。  
報告してくださった[Orito Itsuki](https://github.com/MatchaChoco010)さん、教えてくださった[開途](https://twitter.com/Kaito_YST)さん、ありがとうございます！
resolving a bug > [:bug: fix windows server path issue](https://github.com/ttrace/vscode-language-japanese-novel/pull/24) by [Orito Itsuki](https://github.com/MatchaChoco010)

## 0.9.1

文字数カウントのメニューを「締め切りフォルダー」に変更しました。  
また、締め切りフォルダーの設定時に目標の文字数を設定できるようになりました。

## 0.9.0

HTML形式のコメントアウトにもカラーリングを行うことにしました。

内部的な変更ですが、縦書きのプレビューだけを送信するhttpサーバーから、一般的なhttpサーバーに拡張しました。  
JavascriptやCSSを読み込むことができますので、今後の変更が楽になるかと思います。

HTMLにリセットCSSを導入しました。
(modern-css-reset)[https://github.com/andy-piccalilli/modern-css-reset]

## 0.8.4

フォルダーではなくテキストファイルを単独で開いたときに、機能拡張が動作しなくなってしまう問題を修正しました。
relolving: [textファイルを単独で開いたときにcommand not foundが出る](https://github.com/ttrace/vscode-language-japanese-novel/issues/22)

なお、テキストファイルを単独で開いた場合、原稿のコンパイルなどのコマンドは実行できません。

## 0.8.3

特定フォルダーの文字数をカウントできるようになりました。  
画面左のエクスプローラーでフォルダーを選択して［文字数カウント開始］を実行してください。  
長い小説の一部分や連載の文字数を計算する時に便利に使えるようになったと思います（必須でした！）

## 0.8.2

少数のフォントサイズが正しく設定できなかったバグを修正しています。  
おすすめの設定は、フォントサイズ2.5vhで40文字ですよ。

縦書きプレビューの更新時間を1.5秒よりも遅くならないように修正しました。  
長いテキストの場合にはもたつくかもしれませんが、後のバージョンでなんとかします。

## 0.8.1

ステータスバーでアクティブなドキュメントの文字数、プロジェクト全体の文字数を表示できるようになりました。  
プロジェクト全体の文字数は、ファイルを保存したタイミングで更新します。

なお、MITライセンスで公開されている8amjp/vsce-charactercountの成果を使わせていただいています。
[8amjp/vsce-charactercount](https://github.com/8amjp/vsce-charactercount)

## 0.8.0

テキストファイルの結合が可能になりました。
VS Codeで開いているフォルダー直下のテキストファイルを結合し、publishフォルダーの中に、フォルダー名のファイルを作ります。

VS Codeで開いているフォルダーの中に「原稿」あるいは「Draft」フォルダーがある場合には、そのフォルダーの中のテキストのみ結合します。

テキストを含むフォルダーが結合される時に、区切り文字を挿入できます。現在のバージョンは3文字落とした「＊」を挿入します。

## 0.7.6

[Masayoshi Takahashi](https://github.com/takahashim)さんの貢献によって、eslintを導入し、スクリプトの型安全性を見直しています。また、[Masayoshi Takahashi]さんには、 MITライセンスの記載方法も修正していただきました。

- [Define FontSize type as Template Literal Types](https://github.com/ttrace/vscode-language-japanese-novel/pull/4)
- [add eslint](https://github.com/ttrace/vscode-language-japanese-novel/pull/6)

プレビューのレスポンスを若干早めています。

## 0.7.5

0.7.4 で動作しなくなっていた縦書きのプレビューのバグを修正しました。

## 0.7.2

単独で開いたファイルも縦書きできるようになりました。

## 0.7.1

パッケージ依存の修正。utf-8-validateを入れ忘れていました。

## 0.7.0

このバージョンから、プレビューにnode httpサーバーを使い、テキストをwebsocketsで書き出すことにしました。  
今まではVisual Studio CodeのWebViewに直接HTMLを書き出していましたが、サーバーにしてプロセスを切り離すことで、以下のメリットが得られます。  

- テキストエディタのレスポンスを低下させずに、長いテキストをプレビューできる
- 他のコンピューターや、モバイルデバイスのブラウザーからプレビューを参照することができる
- 締め切りタイマーや進捗グラフなど、今後予定している機能追加が楽になる（jqueryを使い始めました）

また、サーバーだけ起動する\[Novel:プレビューサーバー起動\]メニューも追加しました。実行すると、縦書き表示に使っているlocalhost:8080で縦書きのプレビューサーバーが起動します。LANの他のコンピューターからも参照できますので、スマートフォンやタブレットなどをビュワーとしてお使いください。

また、このバージョンからエクステンションのスクリプトをjavascriptからtypescriptに変更しています。

## 0.6.9

プレビューのスクロール位置が追従しないバグの修正。

## 0.6.8

出力するPDFも、画面プレビュー時の行あたり字数を用いるように変更しました。

bug-fix:
ユーザー設定の正規表現検索置換の初期設定を修正。

## 0.6.4

青空文庫の字下げ注記に、簡易に対応しました。以下のように書くと縦書きのプレビューとPDF出力で3文字まで字下げすることが可能です。

```
［＃ここから３文字下げ］
字下げしたい段落。
［＃ここで字下げ終わり］
```

## 0.6.3

正規表現の検索置換ができなくなっていたのを修正。設定画面の例も修正。

## 0.6.1

会話の中に、サポートする括弧で囲まれた文があったとき、ハイライトするように修正。

HTML形式のコメントを、言語"novel"の blockcomment として定義した。コメントは、縦書きのプレビュー時に吹き出しで表示し、PDFを書き出す時には無視される。
